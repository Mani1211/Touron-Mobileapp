{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Project\\\\TourOn\\\\Touron-Mobileapp-1\\\\src\\\\Screens\\\\StoriesScreens\\\\StoriesHome.js\";\nimport React, { useEffect, useState, useContext } from \"react\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { useWindowDimensions } from \"react-native-web/dist/index\";\nimport { useIsFocused } from \"@react-navigation/native\";\nimport { database } from \"firebase\";\nimport HeaderTile from \"./../../Reusable Components/HeaderTile\";\nimport { AntDesign, Feather } from \"@expo/vector-icons\";\nimport { AuthContext } from \"./../../context/AuthContext\";\n\nvar StoriesHome = function StoriesHome(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useContext = useContext(AuthContext),\n      setFleetData = _useContext.setFleetData;\n\n  var _useState = useState(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      step = _useState2[0],\n      setStep = _useState2[1];\n\n  var _useWindowDimensions = useWindowDimensions(),\n      width = _useWindowDimensions.width,\n      height = _useWindowDimensions.height;\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      storiesData = _useState4[0],\n      setStoriesData = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      storyLoaded = _useState6[0],\n      setStoryLoaded = _useState6[1];\n\n  var isFocused = useIsFocused();\n  console.log(\"storiesData\", storiesData);\n  useEffect(function () {\n    getStories();\n  }, [isFocused]);\n\n  var getStories = function getStories() {\n    setStoryLoaded(true);\n    var v = [];\n    database().ref(\"stories\").on(\"value\", function (data) {\n      data.forEach(function (d) {\n        var stories = [];\n        d.forEach(function (s) {\n          stories.push({\n            key: s.key,\n            value: s.val()\n          });\n        });\n        v.push({\n          storyNumber: d.key,\n          categoryTitle: stories[0].value.categoryTitle,\n          stories: stories\n        });\n      });\n    });\n    setStoriesData(v);\n    setStoryLoaded(false);\n  };\n\n  var deleteStory = function deleteStory(key) {\n    database().ref(\"stories/story\" + step + \"/\" + key).remove().then(function () {\n      return getStories();\n    });\n  };\n\n  var NotFound = function NotFound() {\n    return React.createElement(View, {\n      style: {\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 5\n      }\n    }, React.createElement(Image, {\n      source: require(\"../../../assets/Stories/NoStories.png\"),\n      style: {\n        height: height * 0.4,\n        width: width * 0.9\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }\n    }), React.createElement(Text, {\n      style: {\n        fontSize: 20,\n        fontFamily: \"Andika\",\n        padding: 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }\n    }, \"No Stories Found\"), React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return navigation.navigate(\"AddStories\", {\n          story: step,\n          key: null,\n          value: null,\n          categoryName: null\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      style: styles.addStory,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }\n    }, \"Add Stories\")));\n  };\n\n  var SingleStory = function SingleStory(_ref2) {\n    var id = _ref2.id,\n        value = _ref2.value,\n        index = _ref2.index;\n    return React.createElement(View, {\n      style: {\n        paddingHorizontal: 20,\n        paddingVertical: 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 5\n      }\n    }, React.createElement(View, {\n      style: styles.singleStory,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      style: {\n        fontFamily: \"Andika\",\n        fontSize: 18\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }\n    }, index + 1, \".\", value.storyTitle), React.createElement(View, {\n      style: {\n        flexDirection: \"row\",\n        justifyContent: \"space-between\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }\n    }, React.createElement(Feather, {\n      onPress: function onPress() {\n        return console.warn(\"EDit\");\n      },\n      name: \"edit-3\",\n      size: 28,\n      onPress: function onPress() {\n        navigation.navigate(\"AddStories\", {\n          key: id,\n          value: value,\n          story: step,\n          categoryName: null\n        });\n      },\n      color: \"black\",\n      style: {\n        color: \"#E28633\",\n        paddingHorizontal: 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }\n    }), React.createElement(AntDesign, {\n      onPress: function onPress() {\n        return console.warn(\"Delete\");\n      },\n      name: \"delete\",\n      size: 28,\n      onPress: function onPress() {\n        return deleteStory(id);\n      },\n      color: \"black\",\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }))));\n  };\n\n  var render = function render() {\n    var sto = storiesData.find(function (s) {\n      return s == null ? void 0 : s.storyNumber.includes(step.toString());\n    });\n    return sto != null && sto.stories ? sto == null ? void 0 : sto.stories : [];\n  };\n\n  var stories = [{\n    name: \"Story 1\",\n    number: 1\n  }, {\n    name: \"Story 2\",\n    number: 2\n  }, {\n    name: \"Story 3\",\n    number: 3\n  }, {\n    name: \"Story 4\",\n    number: 4\n  }, {\n    name: \"Story 5\",\n    number: 5\n  }, {\n    name: \"Story 6\",\n    number: 6\n  }, {\n    name: \"Story 7\",\n    number: 7\n  }, {\n    name: \"Story 8\",\n    number: 8\n  }, {\n    name: \"Story 9\",\n    number: 9\n  }, {\n    name: \"Story 10\",\n    number: 10\n  }];\n  return React.createElement(View, {\n    style: {\n      flex: 1,\n      paddingTop: 20,\n      backgroundColor: \"#fff\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 5\n    }\n  }, storyLoaded ? React.createElement(ActivityIndicator, {\n    size: 28,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }) : React.createElement(React.Fragment, null, React.createElement(HeaderTile, {\n    name: \"Stories\",\n    navigation: navigation,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 11\n    }\n  }), React.createElement(Text, {\n    style: {\n      fontSize: 30,\n      paddingTop: 40,\n      paddingLeft: 10,\n      fontFamily: Platform.OS === \"ios\" ? \"AvenirNext-Bold\" : \"Avenir\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }, \"Stories Section\"), React.createElement(View, {\n    style: {\n      flexDirection: \"row\",\n      margin: 20,\n      justifyContent: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 11\n    }\n  }, React.createElement(FlatList, {\n    horizontal: true,\n    showsHorizontalScrollIndicator: false,\n    keyExtractor: function keyExtractor(item) {\n      return item.number;\n    },\n    data: stories,\n    renderItem: function renderItem(_ref3) {\n      var item = _ref3.item;\n      return React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return setStep(item.number);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: [styles.storyHead, {\n          backgroundColor: step === item.number ? \"#E28633\" : \"#D9D9D9\"\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }\n      }, item.name));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }\n  })), render().length === 0 ? React.createElement(NotFound, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }\n  }) : React.createElement(ScrollView, {\n    contentContainerStyle: {\n      width: width\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 20,\n      fontFamily: \"Andika\",\n      textAlign: \"center\",\n      paddingVertical: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 15\n    }\n  }, \"Category : \", render()[0].value.categoryTitle), render().map(function (d, index) {\n    return React.createElement(SingleStory, {\n      id: d.key,\n      value: d.value,\n      key: d.key,\n      index: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 19\n      }\n    });\n  }), React.createElement(TouchableOpacity, {\n    style: {\n      width: \"40%\",\n      alignSelf: \"center\",\n      marginBottom: 40\n    },\n    onPress: function onPress() {\n      return navigation.navigate(\"AddStories\", {\n        story: step,\n        key: null,\n        value: null,\n        categoryName: render()[0].value.categoryTitle\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 15\n    }\n  }, React.createElement(Text, {\n    style: styles.addStory,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 17\n    }\n  }, \"Add Stories\")))));\n};\n\nexport default StoriesHome;\nvar styles = StyleSheet.create({\n  storyHead: {\n    fontSize: 18,\n    color: \"#fff\",\n    paddingVertical: 8,\n    paddingHorizontal: 15,\n    marginRight: 5,\n    borderRadius: 30\n  },\n  singleStory: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    paddingHorizontal: 10,\n    paddingBottom: 5,\n    borderBottomColor: \"#D9D9D9\",\n    borderBottomWidth: 1,\n    marginBottom: 20\n  },\n  addStory: {\n    fontSize: 18,\n    color: \"#fff\",\n    paddingVertical: 12,\n    backgroundColor: \"#E28633\",\n    paddingHorizontal: 18,\n    marginRight: 5,\n    borderRadius: 30,\n    textAlign: \"center\",\n    width: \"100%\"\n  }\n});","map":{"version":3,"sources":["D:/Project/TourOn/Touron-Mobileapp-1/src/Screens/StoriesScreens/StoriesHome.js"],"names":["React","useEffect","useState","useContext","useWindowDimensions","useIsFocused","database","HeaderTile","AntDesign","Feather","AuthContext","StoriesHome","navigation","setFleetData","step","setStep","width","height","storiesData","setStoriesData","storyLoaded","setStoryLoaded","isFocused","console","log","getStories","v","ref","on","data","forEach","d","stories","s","push","key","value","val","storyNumber","categoryTitle","deleteStory","remove","then","NotFound","justifyContent","alignItems","require","fontSize","fontFamily","padding","navigate","story","categoryName","styles","addStory","SingleStory","id","index","paddingHorizontal","paddingVertical","singleStory","storyTitle","flexDirection","warn","color","render","sto","find","includes","toString","name","number","flex","paddingTop","backgroundColor","paddingLeft","Platform","OS","margin","item","storyHead","length","textAlign","map","alignSelf","marginBottom","StyleSheet","create","marginRight","borderRadius","paddingBottom","borderBottomColor","borderBottomWidth"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport {\r\n  Text,\r\n  View,\r\n  TouchableOpacity,\r\n  StyleSheet,\r\n  ActivityIndicator,\r\n  FlatList,\r\n  Image,\r\n  ScrollView,\r\n  useWindowDimensions,\r\n} from \"react-native\";\r\n\r\nimport { useIsFocused } from \"@react-navigation/native\";\r\n\r\nimport { database } from \"firebase\";\r\nimport HeaderTile from \"./../../Reusable Components/HeaderTile\";\r\nimport { AntDesign, Feather } from \"@expo/vector-icons\";\r\nimport { AuthContext } from \"./../../context/AuthContext\";\r\n\r\nconst StoriesHome = ({ navigation }) => {\r\n  const { setFleetData } = useContext(AuthContext);\r\n  const [step, setStep] = useState(1);\r\n  const { width, height } = useWindowDimensions();\r\n  const [storiesData, setStoriesData] = useState([]);\r\n  const [storyLoaded, setStoryLoaded] = useState(false);\r\n  const isFocused = useIsFocused();\r\n  console.log(`storiesData`, storiesData);\r\n\r\n  useEffect(() => {\r\n    getStories();\r\n  }, [isFocused]);\r\n\r\n  const getStories = () => {\r\n    setStoryLoaded(true);\r\n    let v = [];\r\n    database()\r\n      .ref(\"stories\")\r\n      .on(\"value\", (data) => {\r\n        data.forEach((d) => {\r\n          let stories = [];\r\n          d.forEach((s) => {\r\n            stories.push({ key: s.key, value: s.val() });\r\n          });\r\n          v.push({\r\n            storyNumber: d.key,\r\n            categoryTitle: stories[0].value.categoryTitle,\r\n            stories: stories,\r\n          });\r\n        });\r\n      });\r\n\r\n    setStoriesData(v);\r\n    setStoryLoaded(false);\r\n  };\r\n\r\n  const deleteStory = (key) => {\r\n    // console.log(`key`, key);\r\n    database()\r\n      .ref(`stories/story${step}/${key}`)\r\n      .remove()\r\n      .then(() => getStories());\r\n  };\r\n\r\n  const NotFound = () => (\r\n    <View style={{ justifyContent: \"center\", alignItems: \"center\" }}>\r\n      <Image\r\n        source={require(\"../../../assets/Stories/NoStories.png\")}\r\n        style={{ height: height * 0.4, width: width * 0.9 }}\r\n      />\r\n\r\n      <Text style={{ fontSize: 20, fontFamily: \"Andika\", padding: 10 }}>\r\n        No Stories Found\r\n      </Text>\r\n      <TouchableOpacity\r\n        onPress={() =>\r\n          navigation.navigate(\"AddStories\", {\r\n            story: step,\r\n            key: null,\r\n            value: null,\r\n            categoryName: null,\r\n          })\r\n        }\r\n      >\r\n        <Text style={styles.addStory}>Add Stories</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n\r\n  const SingleStory = ({ id, value, index }) => (\r\n    <View style={{ paddingHorizontal: 20, paddingVertical: 10 }}>\r\n      <View style={styles.singleStory}>\r\n        <Text style={{ fontFamily: \"Andika\", fontSize: 18 }}>\r\n          {index + 1}.{value.storyTitle}\r\n        </Text>\r\n        <View\r\n          style={{\r\n            flexDirection: \"row\",\r\n            justifyContent: \"space-between\",\r\n          }}\r\n        >\r\n          <Feather\r\n            onPress={() => console.warn(\"EDit\")}\r\n            name=\"edit-3\"\r\n            size={28}\r\n            onPress={() => {\r\n              navigation.navigate(\"AddStories\", {\r\n                key: id,\r\n                value: value,\r\n                story: step,\r\n                categoryName: null,\r\n              });\r\n            }}\r\n            color=\"black\"\r\n            style={{ color: \"#E28633\", paddingHorizontal: 10 }}\r\n          />\r\n          <AntDesign\r\n            onPress={() => console.warn(\"Delete\")}\r\n            name=\"delete\"\r\n            size={28}\r\n            onPress={() => deleteStory(id)}\r\n            color=\"black\"\r\n            style={{ color: \"red\" }}\r\n          />\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n\r\n  const render = () => {\r\n    const sto = storiesData.find((s) =>\r\n      s?.storyNumber.includes(step.toString())\r\n    );\r\n    return sto?.stories ? sto?.stories : [];\r\n  };\r\n\r\n  const stories = [\r\n    {\r\n      name: \"Story 1\",\r\n      number: 1,\r\n    },\r\n    {\r\n      name: \"Story 2\",\r\n      number: 2,\r\n    },\r\n    {\r\n      name: \"Story 3\",\r\n      number: 3,\r\n    },\r\n    {\r\n      name: \"Story 4\",\r\n      number: 4,\r\n    },\r\n    {\r\n      name: \"Story 5\",\r\n      number: 5,\r\n    },\r\n    {\r\n      name: \"Story 6\",\r\n      number: 6,\r\n    },\r\n    {\r\n      name: \"Story 7\",\r\n      number: 7,\r\n    },\r\n    {\r\n      name: \"Story 8\",\r\n      number: 8,\r\n    },\r\n    {\r\n      name: \"Story 9\",\r\n      number: 9,\r\n    },\r\n    {\r\n      name: \"Story 10\",\r\n      number: 10,\r\n    },\r\n  ];\r\n  return (\r\n    <View style={{ flex: 1, paddingTop: 20, backgroundColor: \"#fff\" }}>\r\n      {storyLoaded ? (\r\n        <ActivityIndicator size={28} />\r\n      ) : (\r\n        <>\r\n          <HeaderTile name={\"Stories\"} navigation={navigation} />\r\n          <Text\r\n            style={{\r\n              fontSize: 30,\r\n              paddingTop: 40,\r\n              paddingLeft: 10,\r\n              fontFamily: Platform.OS === \"ios\" ? \"AvenirNext-Bold\" : \"Avenir\",\r\n            }}\r\n          >\r\n            Stories Section\r\n          </Text>\r\n          <View\r\n            style={{\r\n              flexDirection: \"row\",\r\n              margin: 20,\r\n              justifyContent: \"center\",\r\n            }}\r\n          >\r\n            <FlatList\r\n              horizontal\r\n              showsHorizontalScrollIndicator={false}\r\n              keyExtractor={(item) => item.number}\r\n              data={stories}\r\n              renderItem={({ item }) => {\r\n                return (\r\n                  <TouchableOpacity onPress={() => setStep(item.number)}>\r\n                    <Text\r\n                      style={[\r\n                        styles.storyHead,\r\n                        {\r\n                          backgroundColor:\r\n                            step === item.number ? \"#E28633\" : \"#D9D9D9\",\r\n                        },\r\n                      ]}\r\n                    >\r\n                      {item.name}\r\n                    </Text>\r\n                  </TouchableOpacity>\r\n                );\r\n              }}\r\n            />\r\n          </View>\r\n\r\n          {render().length === 0 ? (\r\n            <NotFound />\r\n          ) : (\r\n            <ScrollView\r\n              contentContainerStyle={{\r\n                width: width,\r\n              }}\r\n            >\r\n              <Text\r\n                style={{\r\n                  fontSize: 20,\r\n                  fontFamily: \"Andika\",\r\n                  textAlign: \"center\",\r\n                  paddingVertical: 10,\r\n                }}\r\n              >\r\n                Category : {render()[0].value.categoryTitle}\r\n              </Text>\r\n              {render().map((d, index) => {\r\n                return (\r\n                  <SingleStory\r\n                    id={d.key}\r\n                    value={d.value}\r\n                    key={d.key}\r\n                    index={index}\r\n                  />\r\n                );\r\n              })}\r\n              <TouchableOpacity\r\n                style={{ width: \"40%\", alignSelf: \"center\", marginBottom: 40 }}\r\n                onPress={() =>\r\n                  navigation.navigate(\"AddStories\", {\r\n                    story: step,\r\n                    key: null,\r\n                    value: null,\r\n                    categoryName: render()[0].value.categoryTitle,\r\n                  })\r\n                }\r\n              >\r\n                <Text style={styles.addStory}>Add Stories</Text>\r\n              </TouchableOpacity>\r\n            </ScrollView>\r\n          )}\r\n        </>\r\n      )}\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default StoriesHome;\r\n\r\nconst styles = StyleSheet.create({\r\n  storyHead: {\r\n    fontSize: 18,\r\n    color: \"#fff\",\r\n    paddingVertical: 8,\r\n    paddingHorizontal: 15,\r\n    marginRight: 5,\r\n    borderRadius: 30,\r\n  },\r\n  singleStory: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    paddingHorizontal: 10,\r\n    paddingBottom: 5,\r\n    borderBottomColor: \"#D9D9D9\",\r\n    borderBottomWidth: 1,\r\n    marginBottom: 20,\r\n  },\r\n  addStory: {\r\n    fontSize: 18,\r\n    color: \"#fff\",\r\n    paddingVertical: 12,\r\n    backgroundColor: \"#E28633\",\r\n    paddingHorizontal: 18,\r\n    marginRight: 5,\r\n    borderRadius: 30,\r\n    textAlign: \"center\",\r\n    width: \"100%\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}